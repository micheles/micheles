<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
        <html>
        <head>
        <meta name="generator" content="Generated by Python">
        <title>P15</title>
        
<STYLE TYPE="text/css">
  body { font-size: 160%; }
</STYLE>

        </head>
<body bgcolor="lightblue">

       
<table border=0 summary='a table'>
<tr>
  <td bgcolor="lightblue"><small>
<table border=0 summary='a table'>
<tr>
  <td bgcolor="lightblue">
<table border=0 summary='a table'>
<tr>
  <td bgcolor="lightblue"><img src = "cjlogo.jpg" alt = "logo"></td> 
</tr>
</table>
</td> 
</tr>
<tr>
  <td bgcolor="lightblue">
<table border=0 summary='a table'>
<tr>
  <td bgcolor="lightblue"><a href='P16.html'>Next</a></td> <td bgcolor="lightblue"><a href='P14.html'>Prev</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P01.html'>First</a></td> <td bgcolor="lightblue"><a href='P16.html'>Last</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P15.html'>P15</a></td> <td bgcolor="lightblue"></td> 
</tr>
<tr>
  <td bgcolor="lightblue"></td> <td bgcolor="lightblue"></td> 
</tr>
</table>
</td> 
</tr>
<tr>
  <td bgcolor="lightblue">
<table border=0 summary='a table'>
<tr>
  <td bgcolor="lightblue"><a href='P01.html'>P01</a></td> <td bgcolor="lightblue"><a href='P02.html'>P02</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P03.html'>P03</a></td> <td bgcolor="lightblue"><a href='P04.html'>P04</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P05.html'>P05</a></td> <td bgcolor="lightblue"><a href='P06.html'>P06</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P07.html'>P07</a></td> <td bgcolor="lightblue"><a href='P08.html'>P08</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P09.html'>P09</a></td> <td bgcolor="lightblue"><a href='P10.html'>P10</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P11.html'>P11</a></td> <td bgcolor="lightblue"><a href='P12.html'>P12</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P13.html'>P13</a></td> <td bgcolor="lightblue"><a href='P14.html'>P14</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"><a href='P15.html'>P15</a></td> <td bgcolor="lightblue"><a href='P16.html'>P16</a></td> 
</tr>
<tr>
  <td bgcolor="lightblue"></td> <td bgcolor="lightblue"></td> 
</tr>
</table>
</td> 
</tr>
</table>
</small></td> <td bgcolor="lightblue"><h1>Writing clients</h1><br/>

<pre>
from twisted.internet.protocol import ClientFactory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class EchoClient(LineReceiver):
    end="Bye-bye!"
    def connectionMade(self):
        self.sendLine("Hello, world!")
        self.sendLine("What a fine day it is.")
        self.sendLine(self.end)
    def lineReceived(self, line):
        print "receive:", line
        if line == self.end:
            self.transport.loseConnection()

class EchoClientFactory(ClientFactory):
    protocol = EchoClient
    def clientConnectionFailed(self, connector, reason):
        print 'connection failed:', reason.getErrorMessage()
        reactor.stop()
    def clientConnectionLost(self, connector, reason):
        print 'connection lost:', reason.getErrorMessage()
        reactor.stop()

reactor.connectTCP('localhost', 8000, EchoClientFactory())
reactor.run()
</pre></td> 
</tr>
</table>

        </body>
        
</html>
